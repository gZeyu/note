# 用户关系分析
## 四种用户关系状态
- 关注
- 粉丝
- 互关
- 无关系

这四种状态在查询用户粉丝、关注和互关等列表、浏览用户主页的时候会用到
## 功能需求
### 基础需求
- 查询关注列表
- 查询粉丝列表
- 查询互关列表
- 查询两个用户关系状态
- 推送关注用户动态
### 拓展需求
- 用户a与用户b的共同关注列表
- 用户a与用户b的共同粉丝列表
- 用户a的关注列表里都有谁关注了用户b

## 方案1
每个用户可以关注任意多个其他用户，同时也可以被任意多个其他用户关注。这是用户实体集内部各个实体的多对多的联系，所以只需两个表：`blog_user`和`bolg_follower`
```
blog_user(id, username, ..., gmt_create, gmt_modified)
```
```
blog_follower(id, follower, followed, gmt_create, gmt_modified)
```
在`blog_follower`表中建两个索引：`(follower, followed)`和`(followed)`。查询语句执行时会依照最左前缀匹配原则，故这里省略`(follower)`索引的创建。

## 参考
1. [用MySQL实现微博关注关系的方案分析](https://my.oschina.net/yonghan/blog/475588)
2. [微博关注我、我关注你数据库该怎么设计](https://blog.csdn.net/u010098331/article/details/51445904)
<!--stackedit_data:
eyJoaXN0b3J5IjpbNTMxOTMwNTMzLDI0MDU4MzgyOCw0OTc2MT
U2NTgsLTE5ODIyMTcxNjIsLTIwODk2ODE2MzMsNzQ5NTk0NDAs
MTYyMTA5NjY2OSwtMTcwODEzMjk0Myw4NjQwNDE0MzksMTc0Nj
cwMzY0MCwtMTUyNzM5NTYzNywtNTE2MzU4NjMzLC0yMDc1Nzk3
NjUzLC0xNDIxMjYxNDgzXX0=
-->